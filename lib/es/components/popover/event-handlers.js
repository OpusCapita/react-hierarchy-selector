function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

import { KEYS, CLASS_NAME_SEARCH_FOCUSABLE } from './constants';

function getFocusableFoundElements(target) {
  return Array.prototype.slice.call(target.getElementsByClassName(CLASS_NAME_SEARCH_FOCUSABLE));
}

function calculateNewIndex(key, index, listLength) {
  var i = index;
  switch (key) {
    case KEYS.UP:
      i -= 1;
      break;
    case KEYS.DOWN:
      i += 1;
      break;
    default:
  }

  return function (ind, min, max) {
    if (ind < min) return max;
    if (ind > max) return min;

    return ind;
  }(i, 0, listLength - 1);
}

var EventHandler = function () {
  function EventHandler() {
    _classCallCheck(this, EventHandler);
  }

  EventHandler.searchElementFocusHanlder = function searchElementFocusHanlder(event) {
    var key = event.keyCode;

    if (!key || key !== KEYS.UP && key !== KEYS.DOWN) return;

    var allFoundItems = getFocusableFoundElements(event.currentTarget);

    if (allFoundItems.length === 0) return;

    var _document = document,
        activeElement = _document.activeElement;

    var index = allFoundItems.findIndex(function (i) {
      return i === activeElement;
    });
    index = calculateNewIndex(key, index, allFoundItems.length);

    allFoundItems[index].focus();
  };

  return EventHandler;
}();

export { EventHandler as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3BvcG92ZXIvZXZlbnQtaGFuZGxlcnMuanMiXSwibmFtZXMiOlsiS0VZUyIsIkNMQVNTX05BTUVfU0VBUkNIX0ZPQ1VTQUJMRSIsImdldEZvY3VzYWJsZUZvdW5kRWxlbWVudHMiLCJ0YXJnZXQiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjYWxjdWxhdGVOZXdJbmRleCIsImtleSIsImluZGV4IiwibGlzdExlbmd0aCIsImkiLCJVUCIsIkRPV04iLCJpbmQiLCJtaW4iLCJtYXgiLCJFdmVudEhhbmRsZXIiLCJzZWFyY2hFbGVtZW50Rm9jdXNIYW5sZGVyIiwiZXZlbnQiLCJrZXlDb2RlIiwiYWxsRm91bmRJdGVtcyIsImN1cnJlbnRUYXJnZXQiLCJsZW5ndGgiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJmaW5kSW5kZXgiLCJmb2N1cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxJQUFULEVBQWVDLDJCQUFmLFFBQWtELGFBQWxEOztBQUVBLFNBQVNDLHlCQUFULENBQW1DQyxNQUFuQyxFQUEyQztBQUN6QyxTQUFPQyxNQUFNQyxTQUFOLENBQ0pDLEtBREksQ0FFSkMsSUFGSSxDQUVDSixPQUFPSyxzQkFBUCxDQUE4QlAsMkJBQTlCLENBRkQsQ0FBUDtBQUdEOztBQUVELFNBQVNRLGlCQUFULENBQTJCQyxHQUEzQixFQUFnQ0MsS0FBaEMsRUFBdUNDLFVBQXZDLEVBQW1EO0FBQ2pELE1BQUlDLElBQUlGLEtBQVI7QUFDQSxVQUFRRCxHQUFSO0FBQ0UsU0FBS1YsS0FBS2MsRUFBVjtBQUNFRCxXQUFLLENBQUw7QUFDQTtBQUNGLFNBQUtiLEtBQUtlLElBQVY7QUFDRUYsV0FBSyxDQUFMO0FBQ0E7QUFDRjtBQVBGOztBQVVBLFNBQVEsVUFBQ0csR0FBRCxFQUFNQyxHQUFOLEVBQVdDLEdBQVgsRUFBbUI7QUFDekIsUUFBSUYsTUFBTUMsR0FBVixFQUFlLE9BQU9DLEdBQVA7QUFDZixRQUFJRixNQUFNRSxHQUFWLEVBQWUsT0FBT0QsR0FBUDs7QUFFZixXQUFPRCxHQUFQO0FBQ0QsR0FMTSxDQUtKSCxDQUxJLEVBS0QsQ0FMQyxFQUtFRCxhQUFhLENBTGYsQ0FBUDtBQU1EOztJQUVvQk8sWTs7Ozs7ZUFDWkMseUIsc0NBQTBCQyxLLEVBQU87QUFDdEMsUUFBTVgsTUFBTVcsTUFBTUMsT0FBbEI7O0FBRUEsUUFBSSxDQUFDWixHQUFELElBQVNBLFFBQVFWLEtBQUtjLEVBQWIsSUFBbUJKLFFBQVFWLEtBQUtlLElBQTdDLEVBQW9EOztBQUVwRCxRQUFNUSxnQkFBZ0JyQiwwQkFBMEJtQixNQUFNRyxhQUFoQyxDQUF0Qjs7QUFFQSxRQUFJRCxjQUFjRSxNQUFkLEtBQXlCLENBQTdCLEVBQWdDOztBQVBNLG9CQVNaQyxRQVRZO0FBQUEsUUFTOUJDLGFBVDhCLGFBUzlCQSxhQVQ4Qjs7QUFVdEMsUUFBSWhCLFFBQVFZLGNBQWNLLFNBQWQsQ0FBd0I7QUFBQSxhQUFLZixNQUFNYyxhQUFYO0FBQUEsS0FBeEIsQ0FBWjtBQUNBaEIsWUFBUUYsa0JBQWtCQyxHQUFsQixFQUF1QkMsS0FBdkIsRUFBOEJZLGNBQWNFLE1BQTVDLENBQVI7O0FBRUFGLGtCQUFjWixLQUFkLEVBQXFCa0IsS0FBckI7QUFDRCxHOzs7OztTQWZrQlYsWSIsImZpbGUiOiJldmVudC1oYW5kbGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtFWVMsIENMQVNTX05BTUVfU0VBUkNIX0ZPQ1VTQUJMRSB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZnVuY3Rpb24gZ2V0Rm9jdXNhYmxlRm91bmRFbGVtZW50cyh0YXJnZXQpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZVxuICAgIC5zbGljZVxuICAgIC5jYWxsKHRhcmdldC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENMQVNTX05BTUVfU0VBUkNIX0ZPQ1VTQUJMRSkpO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVOZXdJbmRleChrZXksIGluZGV4LCBsaXN0TGVuZ3RoKSB7XG4gIGxldCBpID0gaW5kZXg7XG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSBLRVlTLlVQOlxuICAgICAgaSAtPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBLRVlTLkRPV046XG4gICAgICBpICs9IDE7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICB9XG5cbiAgcmV0dXJuICgoaW5kLCBtaW4sIG1heCkgPT4ge1xuICAgIGlmIChpbmQgPCBtaW4pIHJldHVybiBtYXg7XG4gICAgaWYgKGluZCA+IG1heCkgcmV0dXJuIG1pbjtcblxuICAgIHJldHVybiBpbmQ7XG4gIH0pKGksIDAsIGxpc3RMZW5ndGggLSAxKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRIYW5kbGVyIHtcbiAgc3RhdGljIHNlYXJjaEVsZW1lbnRGb2N1c0hhbmxkZXIoZXZlbnQpIHtcbiAgICBjb25zdCBrZXkgPSBldmVudC5rZXlDb2RlO1xuXG4gICAgaWYgKCFrZXkgfHwgKGtleSAhPT0gS0VZUy5VUCAmJiBrZXkgIT09IEtFWVMuRE9XTikpIHJldHVybjtcblxuICAgIGNvbnN0IGFsbEZvdW5kSXRlbXMgPSBnZXRGb2N1c2FibGVGb3VuZEVsZW1lbnRzKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuXG4gICAgaWYgKGFsbEZvdW5kSXRlbXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCB7IGFjdGl2ZUVsZW1lbnQgfSA9IGRvY3VtZW50O1xuICAgIGxldCBpbmRleCA9IGFsbEZvdW5kSXRlbXMuZmluZEluZGV4KGkgPT4gaSA9PT0gYWN0aXZlRWxlbWVudCk7XG4gICAgaW5kZXggPSBjYWxjdWxhdGVOZXdJbmRleChrZXksIGluZGV4LCBhbGxGb3VuZEl0ZW1zLmxlbmd0aCk7XG5cbiAgICBhbGxGb3VuZEl0ZW1zW2luZGV4XS5mb2N1cygpO1xuICB9XG59XG4iXX0=