function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

import { KEYS, CLASS_NAME_SEARCH_FOCUSABLE } from './constants';

function getFocusableFoundElements(target) {
  return Array.prototype.slice.call(target.getElementsByClassName(CLASS_NAME_SEARCH_FOCUSABLE));
}

function calculateNewIndex(key, index, listLength) {
  var i = index;
  switch (key) {
    case KEYS.UP:
      i -= 1;
      break;
    case KEYS.DOWN:
      i += 1;
      break;
    default:
  }

  return function (ind, min, max) {
    if (ind < min) return max;
    if (ind > max) return min;

    return ind;
  }(i, 0, listLength - 1);
}

var EventHandler = function () {
  function EventHandler() {
    _classCallCheck(this, EventHandler);
  }

  EventHandler.searchElementFocusHanlder = function searchElementFocusHanlder(event) {
    var key = event.keyCode;

    if (!key || key !== KEYS.UP && key !== KEYS.DOWN) return;

    var allFoundItems = getFocusableFoundElements(event.currentTarget);

    if (allFoundItems.length === 0) return;

    var _document = document,
        activeElement = _document.activeElement;

    var index = allFoundItems.findIndex(function (i) {
      return i === activeElement;
    });
    index = calculateNewIndex(key, index, allFoundItems.length);

    allFoundItems[index].focus();
  };

  return EventHandler;
}();

export { EventHandler as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3BvcG92ZXIvZXZlbnQtaGFuZGxlcnMuanMiXSwibmFtZXMiOlsiS0VZUyIsIkNMQVNTX05BTUVfU0VBUkNIX0ZPQ1VTQUJMRSIsImdldEZvY3VzYWJsZUZvdW5kRWxlbWVudHMiLCJ0YXJnZXQiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjYWxjdWxhdGVOZXdJbmRleCIsImtleSIsImluZGV4IiwibGlzdExlbmd0aCIsImkiLCJVUCIsIkRPV04iLCJpbmQiLCJtaW4iLCJtYXgiLCJFdmVudEhhbmRsZXIiLCJzZWFyY2hFbGVtZW50Rm9jdXNIYW5sZGVyIiwiZXZlbnQiLCJrZXlDb2RlIiwiYWxsRm91bmRJdGVtcyIsImN1cnJlbnRUYXJnZXQiLCJsZW5ndGgiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJmaW5kSW5kZXgiLCJmb2N1cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxJQUFULEVBQWVDLDJCQUFmLFFBQWtELGFBQWxEOztBQUVBLFNBQVNDLHlCQUFULENBQW1DQyxNQUFuQyxFQUEyQztBQUN6QyxTQUFPQyxNQUFNQyxTQUFOLENBQ0pDLEtBREksQ0FFSkMsSUFGSSxDQUVDSixPQUFPSyxzQkFBUCxDQUE4QlAsMkJBQTlCLENBRkQsQ0FBUDtBQUdEOztBQUVELFNBQVNRLGlCQUFULENBQTJCQyxHQUEzQixFQUFnQ0MsS0FBaEMsRUFBdUNDLFVBQXZDLEVBQW1EO0FBQ2pELE1BQUlDLElBQUlGLEtBQVI7QUFDQSxVQUFRRCxHQUFSO0FBQ0UsU0FBS1YsS0FBS2MsRUFBVjtBQUNFRCxXQUFLLENBQUw7QUFDQTtBQUNGLFNBQUtiLEtBQUtlLElBQVY7QUFDRUYsV0FBSyxDQUFMO0FBQ0E7QUFDRjtBQVBGOztBQVVBLFNBQVEsVUFBQ0csR0FBRCxFQUFNQyxHQUFOLEVBQVdDLEdBQVgsRUFBbUI7QUFDekIsUUFBSUYsTUFBTUMsR0FBVixFQUFlLE9BQU9DLEdBQVA7QUFDZixRQUFJRixNQUFNRSxHQUFWLEVBQWUsT0FBT0QsR0FBUDs7QUFFZixXQUFPRCxHQUFQO0FBQ0QsR0FMTSxDQUtKSCxDQUxJLEVBS0QsQ0FMQyxFQUtFRCxhQUFhLENBTGYsQ0FBUDtBQU1EOztJQUVvQk8sWTs7Ozs7ZUFDWkMseUIsc0NBQTBCQyxLLEVBQU87QUFDdEMsUUFBTVgsTUFBTVcsTUFBTUMsT0FBbEI7O0FBRUEsUUFBSSxDQUFDWixHQUFELElBQVNBLFFBQVFWLEtBQUtjLEVBQWIsSUFBbUJKLFFBQVFWLEtBQUtlLElBQTdDLEVBQW9EOztBQUVwRCxRQUFNUSxnQkFBZ0JyQiwwQkFBMEJtQixNQUFNRyxhQUFoQyxDQUF0Qjs7QUFFQSxRQUFJRCxjQUFjRSxNQUFkLEtBQXlCLENBQTdCLEVBQWdDOztBQVBNLG9CQVNaQyxRQVRZO0FBQUEsUUFTOUJDLGFBVDhCLGFBUzlCQSxhQVQ4Qjs7QUFVdEMsUUFBSWhCLFFBQVFZLGNBQWNLLFNBQWQsQ0FBd0I7QUFBQSxhQUFLZixNQUFNYyxhQUFYO0FBQUEsS0FBeEIsQ0FBWjtBQUNBaEIsWUFBUUYsa0JBQWtCQyxHQUFsQixFQUF1QkMsS0FBdkIsRUFBOEJZLGNBQWNFLE1BQTVDLENBQVI7O0FBRUFGLGtCQUFjWixLQUFkLEVBQXFCa0IsS0FBckI7QUFDRCxHOzs7OztTQWZrQlYsWSIsImZpbGUiOiJldmVudC1oYW5kbGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtFWVMsIENMQVNTX05BTUVfU0VBUkNIX0ZPQ1VTQUJMRSB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmZ1bmN0aW9uIGdldEZvY3VzYWJsZUZvdW5kRWxlbWVudHModGFyZ2V0KSB7XHJcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZVxyXG4gICAgLnNsaWNlXHJcbiAgICAuY2FsbCh0YXJnZXQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDTEFTU19OQU1FX1NFQVJDSF9GT0NVU0FCTEUpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlTmV3SW5kZXgoa2V5LCBpbmRleCwgbGlzdExlbmd0aCkge1xyXG4gIGxldCBpID0gaW5kZXg7XHJcbiAgc3dpdGNoIChrZXkpIHtcclxuICAgIGNhc2UgS0VZUy5VUDpcclxuICAgICAgaSAtPSAxO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgS0VZUy5ET1dOOlxyXG4gICAgICBpICs9IDE7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICB9XHJcblxyXG4gIHJldHVybiAoKGluZCwgbWluLCBtYXgpID0+IHtcclxuICAgIGlmIChpbmQgPCBtaW4pIHJldHVybiBtYXg7XHJcbiAgICBpZiAoaW5kID4gbWF4KSByZXR1cm4gbWluO1xyXG5cclxuICAgIHJldHVybiBpbmQ7XHJcbiAgfSkoaSwgMCwgbGlzdExlbmd0aCAtIDEpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFdmVudEhhbmRsZXIge1xyXG4gIHN0YXRpYyBzZWFyY2hFbGVtZW50Rm9jdXNIYW5sZGVyKGV2ZW50KSB7XHJcbiAgICBjb25zdCBrZXkgPSBldmVudC5rZXlDb2RlO1xyXG5cclxuICAgIGlmICgha2V5IHx8IChrZXkgIT09IEtFWVMuVVAgJiYga2V5ICE9PSBLRVlTLkRPV04pKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgYWxsRm91bmRJdGVtcyA9IGdldEZvY3VzYWJsZUZvdW5kRWxlbWVudHMoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcblxyXG4gICAgaWYgKGFsbEZvdW5kSXRlbXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgeyBhY3RpdmVFbGVtZW50IH0gPSBkb2N1bWVudDtcclxuICAgIGxldCBpbmRleCA9IGFsbEZvdW5kSXRlbXMuZmluZEluZGV4KGkgPT4gaSA9PT0gYWN0aXZlRWxlbWVudCk7XHJcbiAgICBpbmRleCA9IGNhbGN1bGF0ZU5ld0luZGV4KGtleSwgaW5kZXgsIGFsbEZvdW5kSXRlbXMubGVuZ3RoKTtcclxuXHJcbiAgICBhbGxGb3VuZEl0ZW1zW2luZGV4XS5mb2N1cygpO1xyXG4gIH1cclxufVxyXG4iXX0=