'use strict';

exports.__esModule = true;
exports.default = calculateGroupName;
var SOME_GROUP_NAME = 'Default group';

function calculateGroupName(groupName, changedByUser, checkedHashLists) {
  if (changedByUser) return groupName;

  var hashListKeys = Object.keys(checkedHashLists);
  /* No one hashList */
  if (hashListKeys.length === 0) return '';
  /* More then one hash list from different data sources */
  if (hashListKeys.length > 1) return SOME_GROUP_NAME;
  /* Initializing variables */
  var names = [];
  var checkedHash = checkedHashLists[hashListKeys[0]].get();
  var maxParentLength = 0;
  var i = 0;
  var j = 0;
  /* Starting looking for parents */
  var allParents = Object.keys(checkedHash).map(function (key) {
    var parentArray = checkedHash[key].getParents();
    if (parentArray.length > maxParentLength) maxParentLength = parentArray.length;

    return parentArray;
  });
  /* Iteration over all parent sets */
  while (i < maxParentLength) {
    var foundParent = null;
    var moreThanOneParent = false;
    for (j = 0; j < allParents.length; j += 1) {
      var el = allParents[j][i];
      if (el && el !== foundParent) {
        moreThanOneParent = foundParent !== null;
        if (moreThanOneParent) break;else foundParent = el;
      }
    }
    if (moreThanOneParent) break;else names.push(foundParent.name);

    i += 1;
  }
  if (names.length === 0) names.push(SOME_GROUP_NAME);

  return names.join(' / ');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9ncm91cC1uYW1lLWNhbGN1bGF0aW9uLmpzIl0sIm5hbWVzIjpbImNhbGN1bGF0ZUdyb3VwTmFtZSIsIlNPTUVfR1JPVVBfTkFNRSIsImdyb3VwTmFtZSIsImNoYW5nZWRCeVVzZXIiLCJjaGVja2VkSGFzaExpc3RzIiwiaGFzaExpc3RLZXlzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsIm5hbWVzIiwiY2hlY2tlZEhhc2giLCJnZXQiLCJtYXhQYXJlbnRMZW5ndGgiLCJpIiwiaiIsImFsbFBhcmVudHMiLCJtYXAiLCJrZXkiLCJwYXJlbnRBcnJheSIsImdldFBhcmVudHMiLCJmb3VuZFBhcmVudCIsIm1vcmVUaGFuT25lUGFyZW50IiwiZWwiLCJwdXNoIiwibmFtZSIsImpvaW4iXSwibWFwcGluZ3MiOiI7OztrQkFFd0JBLGtCO0FBRnhCLElBQU1DLGtCQUFrQixlQUF4Qjs7QUFFZSxTQUFTRCxrQkFBVCxDQUE0QkUsU0FBNUIsRUFBdUNDLGFBQXZDLEVBQXNEQyxnQkFBdEQsRUFBd0U7QUFDckYsTUFBSUQsYUFBSixFQUFtQixPQUFPRCxTQUFQOztBQUVuQixNQUFNRyxlQUFlQyxPQUFPQyxJQUFQLENBQVlILGdCQUFaLENBQXJCO0FBQ0E7QUFDQSxNQUFJQyxhQUFhRyxNQUFiLEtBQXdCLENBQTVCLEVBQStCLE9BQU8sRUFBUDtBQUMvQjtBQUNBLE1BQUlILGFBQWFHLE1BQWIsR0FBc0IsQ0FBMUIsRUFBNkIsT0FBT1AsZUFBUDtBQUM3QjtBQUNBLE1BQU1RLFFBQVEsRUFBZDtBQUNBLE1BQU1DLGNBQWNOLGlCQUFpQkMsYUFBYSxDQUFiLENBQWpCLEVBQWtDTSxHQUFsQyxFQUFwQjtBQUNBLE1BQUlDLGtCQUFrQixDQUF0QjtBQUNBLE1BQUlDLElBQUksQ0FBUjtBQUNBLE1BQUlDLElBQUksQ0FBUjtBQUNBO0FBQ0EsTUFBTUMsYUFBYVQsT0FBT0MsSUFBUCxDQUFZRyxXQUFaLEVBQXlCTSxHQUF6QixDQUE2QixVQUFDQyxHQUFELEVBQVM7QUFDdkQsUUFBTUMsY0FBY1IsWUFBWU8sR0FBWixFQUFpQkUsVUFBakIsRUFBcEI7QUFDQSxRQUFJRCxZQUFZVixNQUFaLEdBQXFCSSxlQUF6QixFQUEwQ0Esa0JBQWtCTSxZQUFZVixNQUE5Qjs7QUFFMUMsV0FBT1UsV0FBUDtBQUNELEdBTGtCLENBQW5CO0FBTUE7QUFDQSxTQUFPTCxJQUFJRCxlQUFYLEVBQTRCO0FBQzFCLFFBQUlRLGNBQWMsSUFBbEI7QUFDQSxRQUFJQyxvQkFBb0IsS0FBeEI7QUFDQSxTQUFLUCxJQUFJLENBQVQsRUFBWUEsSUFBSUMsV0FBV1AsTUFBM0IsRUFBbUNNLEtBQUssQ0FBeEMsRUFBMkM7QUFDekMsVUFBTVEsS0FBS1AsV0FBV0QsQ0FBWCxFQUFjRCxDQUFkLENBQVg7QUFDQSxVQUFJUyxNQUFNQSxPQUFPRixXQUFqQixFQUE4QjtBQUM1QkMsNEJBQW9CRCxnQkFBZ0IsSUFBcEM7QUFDQSxZQUFJQyxpQkFBSixFQUF1QixNQUF2QixLQUNLRCxjQUFjRSxFQUFkO0FBQ047QUFDRjtBQUNELFFBQUlELGlCQUFKLEVBQXVCLE1BQXZCLEtBQ0taLE1BQU1jLElBQU4sQ0FBV0gsWUFBWUksSUFBdkI7O0FBRUxYLFNBQUssQ0FBTDtBQUNEO0FBQ0QsTUFBSUosTUFBTUQsTUFBTixLQUFpQixDQUFyQixFQUF3QkMsTUFBTWMsSUFBTixDQUFXdEIsZUFBWDs7QUFFeEIsU0FBT1EsTUFBTWdCLElBQU4sQ0FBVyxLQUFYLENBQVA7QUFDRCIsImZpbGUiOiJncm91cC1uYW1lLWNhbGN1bGF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU09NRV9HUk9VUF9OQU1FID0gJ0RlZmF1bHQgZ3JvdXAnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjYWxjdWxhdGVHcm91cE5hbWUoZ3JvdXBOYW1lLCBjaGFuZ2VkQnlVc2VyLCBjaGVja2VkSGFzaExpc3RzKSB7XG4gIGlmIChjaGFuZ2VkQnlVc2VyKSByZXR1cm4gZ3JvdXBOYW1lO1xuXG4gIGNvbnN0IGhhc2hMaXN0S2V5cyA9IE9iamVjdC5rZXlzKGNoZWNrZWRIYXNoTGlzdHMpO1xuICAvKiBObyBvbmUgaGFzaExpc3QgKi9cbiAgaWYgKGhhc2hMaXN0S2V5cy5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgLyogTW9yZSB0aGVuIG9uZSBoYXNoIGxpc3QgZnJvbSBkaWZmZXJlbnQgZGF0YSBzb3VyY2VzICovXG4gIGlmIChoYXNoTGlzdEtleXMubGVuZ3RoID4gMSkgcmV0dXJuIFNPTUVfR1JPVVBfTkFNRTtcbiAgLyogSW5pdGlhbGl6aW5nIHZhcmlhYmxlcyAqL1xuICBjb25zdCBuYW1lcyA9IFtdO1xuICBjb25zdCBjaGVja2VkSGFzaCA9IGNoZWNrZWRIYXNoTGlzdHNbaGFzaExpc3RLZXlzWzBdXS5nZXQoKTtcbiAgbGV0IG1heFBhcmVudExlbmd0aCA9IDA7XG4gIGxldCBpID0gMDtcbiAgbGV0IGogPSAwO1xuICAvKiBTdGFydGluZyBsb29raW5nIGZvciBwYXJlbnRzICovXG4gIGNvbnN0IGFsbFBhcmVudHMgPSBPYmplY3Qua2V5cyhjaGVja2VkSGFzaCkubWFwKChrZXkpID0+IHtcbiAgICBjb25zdCBwYXJlbnRBcnJheSA9IGNoZWNrZWRIYXNoW2tleV0uZ2V0UGFyZW50cygpO1xuICAgIGlmIChwYXJlbnRBcnJheS5sZW5ndGggPiBtYXhQYXJlbnRMZW5ndGgpIG1heFBhcmVudExlbmd0aCA9IHBhcmVudEFycmF5Lmxlbmd0aDtcblxuICAgIHJldHVybiBwYXJlbnRBcnJheTtcbiAgfSk7XG4gIC8qIEl0ZXJhdGlvbiBvdmVyIGFsbCBwYXJlbnQgc2V0cyAqL1xuICB3aGlsZSAoaSA8IG1heFBhcmVudExlbmd0aCkge1xuICAgIGxldCBmb3VuZFBhcmVudCA9IG51bGw7XG4gICAgbGV0IG1vcmVUaGFuT25lUGFyZW50ID0gZmFsc2U7XG4gICAgZm9yIChqID0gMDsgaiA8IGFsbFBhcmVudHMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgIGNvbnN0IGVsID0gYWxsUGFyZW50c1tqXVtpXTtcbiAgICAgIGlmIChlbCAmJiBlbCAhPT0gZm91bmRQYXJlbnQpIHtcbiAgICAgICAgbW9yZVRoYW5PbmVQYXJlbnQgPSBmb3VuZFBhcmVudCAhPT0gbnVsbDtcbiAgICAgICAgaWYgKG1vcmVUaGFuT25lUGFyZW50KSBicmVhaztcbiAgICAgICAgZWxzZSBmb3VuZFBhcmVudCA9IGVsO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9yZVRoYW5PbmVQYXJlbnQpIGJyZWFrO1xuICAgIGVsc2UgbmFtZXMucHVzaChmb3VuZFBhcmVudC5uYW1lKTtcblxuICAgIGkgKz0gMTtcbiAgfVxuICBpZiAobmFtZXMubGVuZ3RoID09PSAwKSBuYW1lcy5wdXNoKFNPTUVfR1JPVVBfTkFNRSk7XG5cbiAgcmV0dXJuIG5hbWVzLmpvaW4oJyAvICcpO1xufVxuIl19