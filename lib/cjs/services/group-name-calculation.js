"use strict";

exports.__esModule = true;
exports["default"] = calculateGroupName;
var SOME_GROUP_NAME = 'Default group';

function calculateGroupName(groupName, changedByUser, checkedHashLists) {
  if (changedByUser) return groupName;
  var hashListKeys = Object.keys(checkedHashLists);
  /* No one hashList */

  if (hashListKeys.length === 0) return '';
  /* More then one hash list from different data sources */

  if (hashListKeys.length > 1) return SOME_GROUP_NAME;
  /* Initializing variables */

  var names = [];
  var checkedHash = checkedHashLists[hashListKeys[0]].get();
  var maxParentLength = 0;
  var i = 0;
  var j = 0;
  /* Starting looking for parents */

  var allParents = Object.keys(checkedHash).map(function (key) {
    var parentArray = checkedHash[key].getParents();
    if (parentArray.length > maxParentLength) maxParentLength = parentArray.length;
    return parentArray;
  });
  /* Iteration over all parent sets */

  while (i < maxParentLength) {
    var foundParent = null;
    var moreThanOneParent = false;

    for (j = 0; j < allParents.length; j += 1) {
      var el = allParents[j][i];

      if (el && el !== foundParent) {
        moreThanOneParent = foundParent !== null;
        if (moreThanOneParent) break;else foundParent = el;
      }
    }

    if (moreThanOneParent) break;else names.push(foundParent.name);
    i += 1;
  }

  if (names.length === 0) names.push(SOME_GROUP_NAME);
  return names.join(' / ');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9ncm91cC1uYW1lLWNhbGN1bGF0aW9uLmpzIl0sIm5hbWVzIjpbIlNPTUVfR1JPVVBfTkFNRSIsImNhbGN1bGF0ZUdyb3VwTmFtZSIsImdyb3VwTmFtZSIsImNoYW5nZWRCeVVzZXIiLCJjaGVja2VkSGFzaExpc3RzIiwiaGFzaExpc3RLZXlzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsIm5hbWVzIiwiY2hlY2tlZEhhc2giLCJnZXQiLCJtYXhQYXJlbnRMZW5ndGgiLCJpIiwiaiIsImFsbFBhcmVudHMiLCJtYXAiLCJrZXkiLCJwYXJlbnRBcnJheSIsImdldFBhcmVudHMiLCJmb3VuZFBhcmVudCIsIm1vcmVUaGFuT25lUGFyZW50IiwiZWwiLCJwdXNoIiwibmFtZSIsImpvaW4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFNQSxlQUFlLEdBQUcsZUFBeEI7O0FBRWUsU0FBU0Msa0JBQVQsQ0FBNEJDLFNBQTVCLEVBQXVDQyxhQUF2QyxFQUFzREMsZ0JBQXRELEVBQXdFO0FBQ3JGLE1BQUlELGFBQUosRUFBbUIsT0FBT0QsU0FBUDtBQUVuQixNQUFNRyxZQUFZLEdBQUdDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZSCxnQkFBWixDQUFyQjtBQUNBOztBQUNBLE1BQUlDLFlBQVksQ0FBQ0csTUFBYixLQUF3QixDQUE1QixFQUErQixPQUFPLEVBQVA7QUFDL0I7O0FBQ0EsTUFBSUgsWUFBWSxDQUFDRyxNQUFiLEdBQXNCLENBQTFCLEVBQTZCLE9BQU9SLGVBQVA7QUFDN0I7O0FBQ0EsTUFBTVMsS0FBSyxHQUFHLEVBQWQ7QUFDQSxNQUFNQyxXQUFXLEdBQUdOLGdCQUFnQixDQUFDQyxZQUFZLENBQUMsQ0FBRCxDQUFiLENBQWhCLENBQWtDTSxHQUFsQyxFQUFwQjtBQUNBLE1BQUlDLGVBQWUsR0FBRyxDQUF0QjtBQUNBLE1BQUlDLENBQUMsR0FBRyxDQUFSO0FBQ0EsTUFBSUMsQ0FBQyxHQUFHLENBQVI7QUFDQTs7QUFDQSxNQUFNQyxVQUFVLEdBQUdULE1BQU0sQ0FBQ0MsSUFBUCxDQUFZRyxXQUFaLEVBQXlCTSxHQUF6QixDQUE2QixVQUFDQyxHQUFELEVBQVM7QUFDdkQsUUFBTUMsV0FBVyxHQUFHUixXQUFXLENBQUNPLEdBQUQsQ0FBWCxDQUFpQkUsVUFBakIsRUFBcEI7QUFDQSxRQUFJRCxXQUFXLENBQUNWLE1BQVosR0FBcUJJLGVBQXpCLEVBQTBDQSxlQUFlLEdBQUdNLFdBQVcsQ0FBQ1YsTUFBOUI7QUFFMUMsV0FBT1UsV0FBUDtBQUNELEdBTGtCLENBQW5CO0FBTUE7O0FBQ0EsU0FBT0wsQ0FBQyxHQUFHRCxlQUFYLEVBQTRCO0FBQzFCLFFBQUlRLFdBQVcsR0FBRyxJQUFsQjtBQUNBLFFBQUlDLGlCQUFpQixHQUFHLEtBQXhCOztBQUNBLFNBQUtQLENBQUMsR0FBRyxDQUFULEVBQVlBLENBQUMsR0FBR0MsVUFBVSxDQUFDUCxNQUEzQixFQUFtQ00sQ0FBQyxJQUFJLENBQXhDLEVBQTJDO0FBQ3pDLFVBQU1RLEVBQUUsR0FBR1AsVUFBVSxDQUFDRCxDQUFELENBQVYsQ0FBY0QsQ0FBZCxDQUFYOztBQUNBLFVBQUlTLEVBQUUsSUFBSUEsRUFBRSxLQUFLRixXQUFqQixFQUE4QjtBQUM1QkMsUUFBQUEsaUJBQWlCLEdBQUdELFdBQVcsS0FBSyxJQUFwQztBQUNBLFlBQUlDLGlCQUFKLEVBQXVCLE1BQXZCLEtBQ0tELFdBQVcsR0FBR0UsRUFBZDtBQUNOO0FBQ0Y7O0FBQ0QsUUFBSUQsaUJBQUosRUFBdUIsTUFBdkIsS0FDS1osS0FBSyxDQUFDYyxJQUFOLENBQVdILFdBQVcsQ0FBQ0ksSUFBdkI7QUFFTFgsSUFBQUEsQ0FBQyxJQUFJLENBQUw7QUFDRDs7QUFDRCxNQUFJSixLQUFLLENBQUNELE1BQU4sS0FBaUIsQ0FBckIsRUFBd0JDLEtBQUssQ0FBQ2MsSUFBTixDQUFXdkIsZUFBWDtBQUV4QixTQUFPUyxLQUFLLENBQUNnQixJQUFOLENBQVcsS0FBWCxDQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTT01FX0dST1VQX05BTUUgPSAnRGVmYXVsdCBncm91cCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNhbGN1bGF0ZUdyb3VwTmFtZShncm91cE5hbWUsIGNoYW5nZWRCeVVzZXIsIGNoZWNrZWRIYXNoTGlzdHMpIHtcbiAgaWYgKGNoYW5nZWRCeVVzZXIpIHJldHVybiBncm91cE5hbWU7XG5cbiAgY29uc3QgaGFzaExpc3RLZXlzID0gT2JqZWN0LmtleXMoY2hlY2tlZEhhc2hMaXN0cyk7XG4gIC8qIE5vIG9uZSBoYXNoTGlzdCAqL1xuICBpZiAoaGFzaExpc3RLZXlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICAvKiBNb3JlIHRoZW4gb25lIGhhc2ggbGlzdCBmcm9tIGRpZmZlcmVudCBkYXRhIHNvdXJjZXMgKi9cbiAgaWYgKGhhc2hMaXN0S2V5cy5sZW5ndGggPiAxKSByZXR1cm4gU09NRV9HUk9VUF9OQU1FO1xuICAvKiBJbml0aWFsaXppbmcgdmFyaWFibGVzICovXG4gIGNvbnN0IG5hbWVzID0gW107XG4gIGNvbnN0IGNoZWNrZWRIYXNoID0gY2hlY2tlZEhhc2hMaXN0c1toYXNoTGlzdEtleXNbMF1dLmdldCgpO1xuICBsZXQgbWF4UGFyZW50TGVuZ3RoID0gMDtcbiAgbGV0IGkgPSAwO1xuICBsZXQgaiA9IDA7XG4gIC8qIFN0YXJ0aW5nIGxvb2tpbmcgZm9yIHBhcmVudHMgKi9cbiAgY29uc3QgYWxsUGFyZW50cyA9IE9iamVjdC5rZXlzKGNoZWNrZWRIYXNoKS5tYXAoKGtleSkgPT4ge1xuICAgIGNvbnN0IHBhcmVudEFycmF5ID0gY2hlY2tlZEhhc2hba2V5XS5nZXRQYXJlbnRzKCk7XG4gICAgaWYgKHBhcmVudEFycmF5Lmxlbmd0aCA+IG1heFBhcmVudExlbmd0aCkgbWF4UGFyZW50TGVuZ3RoID0gcGFyZW50QXJyYXkubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHBhcmVudEFycmF5O1xuICB9KTtcbiAgLyogSXRlcmF0aW9uIG92ZXIgYWxsIHBhcmVudCBzZXRzICovXG4gIHdoaWxlIChpIDwgbWF4UGFyZW50TGVuZ3RoKSB7XG4gICAgbGV0IGZvdW5kUGFyZW50ID0gbnVsbDtcbiAgICBsZXQgbW9yZVRoYW5PbmVQYXJlbnQgPSBmYWxzZTtcbiAgICBmb3IgKGogPSAwOyBqIDwgYWxsUGFyZW50cy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgY29uc3QgZWwgPSBhbGxQYXJlbnRzW2pdW2ldO1xuICAgICAgaWYgKGVsICYmIGVsICE9PSBmb3VuZFBhcmVudCkge1xuICAgICAgICBtb3JlVGhhbk9uZVBhcmVudCA9IGZvdW5kUGFyZW50ICE9PSBudWxsO1xuICAgICAgICBpZiAobW9yZVRoYW5PbmVQYXJlbnQpIGJyZWFrO1xuICAgICAgICBlbHNlIGZvdW5kUGFyZW50ID0gZWw7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtb3JlVGhhbk9uZVBhcmVudCkgYnJlYWs7XG4gICAgZWxzZSBuYW1lcy5wdXNoKGZvdW5kUGFyZW50Lm5hbWUpO1xuXG4gICAgaSArPSAxO1xuICB9XG4gIGlmIChuYW1lcy5sZW5ndGggPT09IDApIG5hbWVzLnB1c2goU09NRV9HUk9VUF9OQU1FKTtcblxuICByZXR1cm4gbmFtZXMuam9pbignIC8gJyk7XG59XG4iXX0=